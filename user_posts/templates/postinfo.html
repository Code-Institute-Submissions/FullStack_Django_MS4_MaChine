{% extends "base.html" %}

{% block content %}
   
        <div class="container">
            <div class="row">
                <div class="col-8">
                    <div class="card card-white post">
                        <div class="post-heading">
                            <div class="float-left image">

                            {% if post.image %}

                                <img class="img-circle avatar" src="url('{{ MEDIA_URL }}{{post.image}}" alt="Post Image">
                        
                        <!-- <div><img class="card-img-top mb-3" src="url('{{ MEDIA_URL }}{{post.image}}" alt="Cover for {{ book.book_title }}"></div> -->
                            
                            {% else %}
                            
                                <img src="http://bootdey.com/img/Content/user_1.jpg" class="img-circle avatar" alt="user profile image">
                            {% endif %}
                            </div>
                            <div class="float-left meta">
                            <div class="title h3">
                                    {{ post.title }}</div>

                                <div class="title h5">
                                    posted by <a href="#"><b>{{ post.author }}</b></a>
                                    
                                </div>
                                <h6 class="text-muted time">{{ post.published_date }}</h6>
                            </div>
                        </div> 
                        <div class="post-description"> 
                            <p>{{ post.content }}</p> 
                        </div>
                        <div class="div">
                        <p><span class="text-muted">Views:</span> {{post.views}}</p>
                        <p><span class="text-muted">Tag:</span> {{ post.tag }}</p>
                        </div>

                        {% if user.is_authenticated and user == post.author %}

                        <a href="{% url 'edit_post' post.id %}" class="btn btn-default">Edit Post</a>

                        <!-- <a href="{% url 'delete_posts' post.id %}" class="btn btn-danger" role="button"> Delete Post</a> -->

                        <button type="button" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#myModal">Delete</button>

                        <!-- Modal -->
                        <div id="myModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Are you sure you want to delete your post?</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>You might want to reconsider?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        <a href="{% url 'delete_posts' post.id %}" class="btn btn-danger" role="button" >Delete Post</a>
                                    </div>
                                </div>

                            </div>
                        </div>

                        {% elif user.is_authenticated and user.is_superuser %}

                        <a href="{% url 'edit_post' post.id %}" class="btn btn-default">Edit Post</a>

                        <!-- <a href="{% url 'delete_posts' post.id %}" class="btn btn-danger" role="button" >Delete Post</a> -->

                        <button type="button" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#myModal">Delete</button>

                        <!-- Modal -->
                        <div id="myModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Are you sure you want to delete your post?</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>You might want to reconsider?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        <a href="{% url 'delete_posts' post.id %}" class="btn btn-danger" role="button" >Delete Post</a>
                                    </div>
                                </div>

                            </div>
                        </div>

                        {% endif %}

                        <a href="{% url 'retrieve_posts' %}" class="btn btn-default">Back to Blog</a>
                        
                    </div>
                </div>
                
            </div>
        </div>

   
 {% endblock %}  
   
   
    <!-- <div class="row">
       
        </div>
        <div class="col-sm-10 col-md-9">
            {% if post.image %}
                <img class="img-blogpost" src="/media/{{ post.image }}">
            {% endif %}
            <h3>{{ post.title }}</h3>
            <div class="row">
                <div class="col-xs-9">
                    <p>{{ post.content }}</p>
                    <p><span class="boldtext">Published on:</span> {{ post.published_date }} </p>
                    <p><span class="boldtext">Views:</span> {{post.views}}</p>
                    <p><span class="boldtext">Tag:</span> {{ post.tag }}</p>
                    <a href="{% url 'retrieve_posts' %}" class="btn btn-default">Back to Blog</a>
                    
                    <hr>
                </div>
            </div>
        </div> -->
